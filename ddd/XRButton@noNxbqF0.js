class v{static createButton(x,r={},n){const t=document.createElement("button");let s="XR";function a(e){let i=null;async function u(o){o.addEventListener("end",S),await x.xr.setSession(o),t.textContent="STOP "+s,i=o,n("started",o)}function S(){i.removeEventListener("end",S),t.textContent="START "+s,i=null,n("ended")}t.style.display="",t.style.cursor="pointer",t.textContent="START "+s,n("initialize");const f={...r,optionalFeatures:["local-floor","bounded-floor","layers",...r.optionalFeatures||[]]};t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){i===null?(n("before_start"),navigator.xr.requestSession(e,f).then(u).catch(o=>{t.textContent="ACCESS DENIED",console.warn("requestSession failed",o),n("not_allowed")})):(i.end(),navigator.xr.offerSession!==void 0&&(n("before_start"),navigator.xr.offerSession(e,f).then(u).catch(o=>{console.warn(o),n("not_allowed")})))},navigator.xr.offerSession!==void 0&&(n("available"),navigator.xr.offerSession(e,f).then(u).catch(o=>{console.warn(o),n("not_allowed")}))}function d(){t.style.display="",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function c(){d(),t.textContent=s+" NOT SUPPORTED",n("not_supported")}function l(e){d(),console.warn("Exception when trying to call xr.isSessionSupported",e),t.textContent=s+" NOT ALLOWED",n("not_allowed")}function p(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return t.id="XRButton",t.style.display="none",p(t),r.mode==="VR"?navigator.xr.isSessionSupported("immersive-vr").then(function(e){e?(s="VR",a("immersive-vr")):c()}).catch(l):navigator.xr.isSessionSupported("immersive-ar").then(function(e){e?(s="AR",a("immersive-ar")):navigator.xr.isSessionSupported("immersive-vr").then(function(i){i?(s="VR",a("immersive-vr")):c()}).catch(l)}).catch(l),t;{const e=document.createElement("a");return window.isSecureContext===!1?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR NEEDS HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="WEBXR NOT AVAILABLE"),e.style.textDecoration="none",p(e),n("not_available"),e}}}export{v as XRButton};
