import{L as O,B as b,av as w,ap as M,a0 as v}from"./ddd@DwDq534T.js";class X extends O{constructor(l,t=1,c=16,o=2){const a=new b,d=c+o*2,s=new Float32Array((d*3+3)*3);a.setAttribute("position",new w(s,3));const u=new M({color:65280}),n=new M({color:16776960});super(a,[n,u]),this.audio=l,this.range=t,this.divisionsInnerAngle=c,this.divisionsOuterAngle=o,this.type="PositionalAudioHelper",this.update()}update(){const l=this.audio,t=this.range,c=this.divisionsInnerAngle,o=this.divisionsOuterAngle,a=v.degToRad(l.panner.coneInnerAngle),d=v.degToRad(l.panner.coneOuterAngle),s=a/2,u=d/2;let n=0,i=0,e,h;const p=this.geometry,r=p.attributes.position;p.clearGroups();function A(m,g,y,I){const f=(g-m)/y;for(r.setXYZ(n,0,0,0),i++,e=m;e<g;e+=f)h=n+i,r.setXYZ(h,Math.sin(e)*t,0,Math.cos(e)*t),r.setXYZ(h+1,Math.sin(Math.min(e+f,g))*t,0,Math.cos(Math.min(e+f,g))*t),r.setXYZ(h+2,0,0,0),i+=3;p.addGroup(n,i,I),n+=i,i=0}A(-u,-s,o,0),A(-s,s,c,1),A(s,u,o,0),r.needsUpdate=!0,a===d&&(this.material[0].visible=!1)}dispose(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()}}export{X as PositionalAudioHelper};
